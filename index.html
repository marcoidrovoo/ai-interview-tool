<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <title>MockedUp InterviewS </title>
  
    <!-- Supabase + Tailwind -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.tailwindcss.com"></script>

<!-- PDF and DOCX Support -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.min.js"></script>
<script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>

<!-- Your JS logic -->
<script type="module" src="supabaseClient.js"></script>

  </head>
  
  <body class="bg-gradient-to-b from-blue-50 to-blue-100 min-h-screen text-gray-800 font-sans">
    <!-- Hero Section -->
    <section class="text-center pt-24 pb-8 px-4">
      <h1 class="text-4xl md:text-5xl font-bold text-blue-900 mb-4">
        Practice Real Interviews with an AI Hiring Manager
      </h1>
      <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto mb-8">
        Get interviewed like you would at the actual company ‚Äî customized by role and company culture.
      </p>
      <a href="setup.html" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow transition duration-300">
        Start Interview
      </a>
      <a href="account.html" class="mt-4 inline-block text-sm text-blue-600 underline hover:text-blue-800">
        Go to My Account
      </a>
      
    </section>
  </body>
  

  <section class="bg-white pt-8 pb-2">
    <h2 class="text-3xl font-bold text-center text-gray-900 mb-12">Why Practice With Us?</h2>
    <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto px-4">
      <div class="bg-gray-50 p-6 rounded-xl border hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-gray-800 mb-2">Tailored Interviews</h3>
        <p class="text-gray-600 text-sm">Custom questions based on your role and company to mimic real-life interviews.</p>
      </div>
      <div class="bg-gray-50 p-6 rounded-xl border hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-gray-800 mb-2">AI-Powered Feedback</h3>
        <p class="text-gray-600 text-sm">Receive blunt, honest, no-fluff evaluations with coaching insights.</p>
      </div>
      <div class="bg-gray-50 p-6 rounded-xl border hover:shadow-lg transition">
        <h3 class="text-xl font-semibold text-gray-800 mb-2">Realistic Scenarios</h3>
        <p class="text-gray-600 text-sm">Practice with AI managers tailored to specific companies and job levels.</p>
      </div>
    </div>
  </section>

   <!-- Pricing Section -->
<section id="plans" class="py-20 bg-white">
  <div class="max-w-5xl mx-auto px-6 text-center">
    <h2 class="text-3xl font-bold mb-12">Choose Your Interview Experience</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

      <!-- Free Plan -->
      <div class="border rounded-xl p-6 bg-gray-50 shadow">
        <h3 class="text-xl font-bold mb-4">Free Plan</h3>
        <ul class="text-left mb-6 space-y-2">
          <li>‚úÖ 5-question AI mock interview</li>
          <li>‚úÖ Personalized feedback report</li>
          <li>‚úÖ Tailored to your role & company</li>
          <li>‚ùå No follow-up questions</li>
          <li>‚ùå No score breakdown</li>
          <li>‚ùå No customization</li>
        </ul>
        <p class="text-xl font-bold">Free</p>
      </div>

      <!-- Premium Plan -->
      <div class="border-2 border-blue-600 rounded-xl p-6 bg-white shadow-lg">
        <h3 class="text-xl font-bold mb-4 text-blue-600">Premium Plan</h3>
        <ul class="text-left mb-6 space-y-2">
          <li>‚úÖ Unlimited questions</li>
          <li>‚úÖ Extended feedback report</li>
          <li>‚úÖ Interview tone customization</li>
          <li>‚úÖ Smart follow-ups</li>
          <li>‚úÖ Example \"perfect answers\"</li>
          <li>‚úÖ Download or email report</li>
        </ul>
        <p class="text-xl font-bold text-blue-600 mb-2">$9.99 <span class="line-through text-gray-400">$14.99</span></p>
        <p class="text-sm text-green-600">Launch promo ‚Äì lock in this price for life</p>
      </div>

      <!-- One-Time Plan -->
      <div class="border rounded-xl p-6 bg-gray-50 shadow">
        <h3 class="text-xl font-bold mb-4">One-Time Interview</h3>
        <ul class="text-left mb-6 space-y-2">
          <li>‚úÖ Single premium session</li>
          <li>‚ùå No subscription required</li>
          <li>‚úÖ All premium features</li>
        </ul>
        <p class="text-xl font-bold">$3.99</p>
      </div>

    </div>
  </div>
</section>
</section>

<section id="resume-section" style="display: none;" class="max-w-xl mx-auto mt-8 p-6 bg-white rounded-xl shadow border">
  <h3 class="text-xl font-semibold mb-4 text-center">Upload Your Resume</h3>
  <input type="file" id="resume-upload" accept=".pdf,.doc,.docx,.txt" class="w-full p-3 border rounded mb-4" />
  <button id="save-resume" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition w-full">
    Save Resume
  </button>
</section>


<!-- ‚úÖ Add signup form below here -->
<div class="max-w-md mx-auto mt-16 bg-white p-6 rounded-xl shadow border">
  <h3 class="text-xl font-semibold mb-4 text-center">Create Account</h3>
  <form id="signup-form" class="space-y-4">
    <input type="email" id="signup-email" placeholder="Email" class="w-full px-4 py-3 border rounded" required />
    <input type="password" id="signup-password" placeholder="Password" class="w-full px-4 py-3 border rounded" required />
    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700 transition">Sign Up</button>
  </form>
</div>

<!-- Login Form -->
<div class="max-w-md mx-auto mt-10 bg-white p-6 rounded-xl shadow border">
  <h3 class="text-xl font-semibold mb-4 text-center">Login</h3>
  <form id="login-form" class="space-y-4">
    <input type="email" id="login-email" placeholder="Email" class="w-full px-4 py-3 border rounded" required />
    <input type="password" id="login-password" placeholder="Password" class="w-full px-4 py-3 border rounded" required />
    <button type="submit" class="w-full bg-green-600 text-white py-3 rounded hover:bg-green-700 transition">Log In</button>
  </form>
</div>


<footer class="bg-white border-t mt-16 py-6 text-center text-gray-600 text-sm">
  <div class="flex flex-col items-center space-y-2">
    <p>¬© 2025 AI Interview Prep. All rights reserved.</p>
    <div class="space-x-4">
      <a href="#" class="hover:text-blue-600">About</a>
      <a href="#" class="hover:text-blue-600">Privacy</a>
      <a href="#" class="hover:text-blue-600">Contact</a>
    </div>
  </div>
</footer>

<script type="module">
  import { supabase } from './supabaseClient.js';

  const form = document.getElementById("signup-form");

  form?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("signup-email").value;
    const password = document.getElementById("signup-password").value;

    const { data, error } = await supabase.auth.signUp({
      email,
      password,
    });

    if (error) {
      alert("Signup failed: " + error.message);
    } else {
      alert("Signup successful! üéâ Check your email to confirm your account.");
      const { data: { user } } = await supabase.auth.getUser();
await supabase.from("users").upsert({ id: user.id, email: user.email });

    }
  });
  const loginForm = document.getElementById("login-form");

loginForm?.addEventListener("submit", async (e) => {
  e.preventDefault();

  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password,
  });

  if (error) {
    alert("Login failed: " + error.message);
  } else {
    alert("Login successful! üéâ");
    const { data: { user } } = await supabase.auth.getUser();
await supabase.from("users").upsert({ id: user.id, email: user.email });

checkAuth(); // üëà This shows the resume box
  }
});

const checkAuth = async () => {
  const {
    data: { session },
  } = await supabase.auth.getSession();

  if (session) {
    console.log("‚úÖ User is logged in:", session.user.email);
    // Optionally show a dashboard or resume section
    document.getElementById("resume-section").style.display = "block";
  } else {
    console.log("‚ùå No user logged in");
    document.getElementById("resume-section").style.display = "none";
  }
};

checkAuth();

// Resume Upload Logic
document.getElementById("save-resume")?.addEventListener("click", async () => {
  const fileInput = document.getElementById("resume-upload");
  const file = fileInput.files[0];
  const saveButton = document.getElementById("save-resume");

  saveButton.disabled = true;
  saveButton.textContent = "Saving...";

  if (!file) {
    alert("Please select a file.");
    saveButton.disabled = false;
    saveButton.textContent = "Save Resume";
    return;
  }

  let textContent = "";
  const fileType = file.name.split('.').pop().toLowerCase();

  try {
    if (fileType === "pdf") {
      const pdfData = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({ data: pdfData }).promise;
      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();
        const pageText = content.items.map(item => item.str).join(" ");
        textContent += pageText + "\n";
      }
    } else if (fileType === "docx") {
      const arrayBuffer = await file.arrayBuffer();
      const result = await mammoth.extractRawText({ arrayBuffer });
      textContent = result.value;
    } else if (fileType === "txt") {
      textContent = await file.text();
    } else {
      alert("Unsupported file type. Please upload a .pdf, .docx, or .txt file.");
      saveButton.disabled = false;
      saveButton.textContent = "Save Resume";
      return;
    }

    const {
      data: { user },
      error: userError,
    } = await supabase.auth.getUser();

    if (userError || !user) {
      alert("User not logged in.");
      saveButton.disabled = false;
      saveButton.textContent = "Save Resume";
      return;
    }

    const { error } = await supabase
      .from("users")
      .update({ resume_text: textContent })
      .eq("id", user.id);

    if (error) {
      alert("‚ùå Failed to save resume: " + error.message);
    } else {
      alert("‚úÖ Resume saved successfully!");
    }
  } catch (err) {
    console.error(err);
    alert("An error occurred while processing the file.");
  }

  saveButton.disabled = false;
  saveButton.textContent = "Save Resume";
});


</script>

  </body>
</html>
